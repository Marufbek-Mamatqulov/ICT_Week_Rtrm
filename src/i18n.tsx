import React, { createContext, useContext, useState, ReactNode, useCallback } from 'react';

export type Lang = 'uz' | 'en' | 'ru';

interface I18nContextValue {
  lang: Lang;
  t: (key: string) => string;
  switchLang: () => void;
}

const dictionaries: Record<Lang, Record<string, string>> = {
  uz: {
    'brand.name': 'TECH FORUM',
    'org.name': 'RAQAMLI TA\'LIMNI RIVOJLANTIRISH MARKAZI',
    'footer.section.students': 'Talabalar uchun',
    'footer.section.entrepreneurs': 'Tadbirkorlar uchun',
    'footer.link.courses': 'Kurslar',
    'footer.link.centers': 'IT Markazlar',
    'footer.link.about': 'Biz haqimizda',
    'footer.link.contact': 'Bog\'lanish',
    'hero.title': 'AI in Digital Education: from vision to impact',
    'hero.tagline': 'Raqamli ta\'limdagi eng so\'nggi yangiliklar, innovatsiyalar va texnologiyalar bilan tanishing: Xorijiy va mahalliy ekspertlardan nutqlar, panel muhokamalari, konkurs-tanlovlar!',
    'hero.cta.program': 'Forum Dasturi',
    'hero.cta.projects': 'Raqamli ta\'lim loyihalari',
    'hero.qr.scan': 'Tadbir maʼlumotlari uchun skanerlang',
    'hero.qr.tooltip': 'Nusxalash',
    'hero.qr.desc': 'Rasmiy portal: ro\'yxatdan o\'tish, yangiliklar, xarita va networking vositalari. QR kodni oson almashtiring.',
    'program.title': 'Forum Dasturi',
    'program.subtitle': 'Strategik qarashlar va innovatsion g\'oyalarni birlashtirgan kuratsiyalangan kun tartibi.',
    'projects.title': 'Loyihalar',
    'projects.subtitle': 'Raqamli ekotizim, barqarorlik va aqlli tizimlarni tezlashtiruvchi tashabbuslar.',
    'projects.helper': 'Surat ustiga olib boring – interaktiv animatsiya.',
    'about.title': 'Biz haqimizda',
    'about.p1': 'Biz texnologlar, tadqiqotchilar, sarmoyadorlar va siyosat yetakchilarini birlashtiruvchi hamkorlik maydonimiz.',
    'about.p2': 'Missiyamiz: g\'oyalar real ta\'sirga tez aylanadigan ekotizimlarni rivojlantirish – iste\'dodlarni qo\'llab-quvvatlash va etik innovatsiyani himoya qilish.',
    'about.p3': 'Forumlar, ochiq laboratoriyalar va vitrinlar orqali AI, kvant, kiberxavfsizlik va infratuzilma bo\'yicha tashabbuslarni kuchaytiramiz.',
    'footer.about': 'Kelajakni yaratish uchun ochiq platforma.',
    'footer.contact': 'Aloqa',
    'footer.quick': 'Havolalar',
    'footer.join': 'Qo\'shiling',
    'footer.register': 'Ro\'yxatdan o\'tish',
    'contact.phone': '+998 71 203 03 43',
    'contact.email': 'education@digital.uz',
    'contact.address': '100164 Toshkent shahri, I.Muminov ko\'chasi, 4',
    'special.title': 'Maxsus Sessiya: AI For IT Education',
    'special.meta.date': 'Sana',
    'special.meta.time': 'Boshlanish',
    'special.meta.location': 'Manzil',
    'special.meta.language': 'Til',
    'special.meta.participants': 'Ishtirokchilar',
    'special.meta.languagesValue': 'O\'zbek / Ingliz',
    'special.meta.participantsValue': '800+ nafar',
    'special.meta.dateValue': '24-sentyabr',
    'special.meta.timeValue': '09:00',
    'special.meta.locationValue': 'CAEx, Main Hall',
    'special.note': 'Taʼlimdagi raqamli transformatsiyani tezlashtirishga bag\'ishlangan maxsus blok.',
    'lang.toggle': 'EN',
    'nav.home': 'Bosh sahifa',
    'nav.program': 'Dastur',
    'nav.speakers': 'Spikerlar',
    'speakers.title': 'Spikerlar',
    'action.register': 'Ro\'yxatdan o\'tish',
    'theme.dark': 'Tungi',
    'theme.light': 'Yorug\'',
    'countdown.days': 'Kun',
    'countdown.hours': 'Soat',
    'countdown.minutes': 'Daqiqa',
    'countdown.seconds': 'Soniya',
    'countdown.until': 'Tadbir boshlanishiga',
    'program.disclaimer': '"AI in Digital Education: From Vision to Impact (G\'oyadan Natijagacha)" forumi DASTURI',
    'program.more': 'Ko\'proq',
    'program.less': 'Kamroq',
    'program.reg.title': 'Ro\'yxatdan o\'tish',
    'program.reg.details': 'Ishtirokchilarni kutib olish va ro\'yxatdan o\'tkazish.',
    'program.opening.title': 'Kirish so\'zi',
    'program.opening.details': 'Forum mavzusi, maqsadi va ahamiyati',
    'program.karimjonov.title': 'Kirish so\'zi',
    'program.karimjonov.speaker': 'R. Karimjonov',
    'program.karimjonov.details': 'Motivatsion nutq',
    'program.break1.title': '—',
    'program.break2.title': '—',
    'program.unicef.title': 'UNICEF ning O\'zbekistondagi faoliyati',
    'program.unicef.speaker': 'UNICEF',
    'program.unicef.details': '',
    'program.eshankulov.title': 'Raqamli ta\'limdagi 5 yillik rejalar',
    'program.eshankulov.speaker': 'A. Eshankulov',
    'program.eshankulov.details': '',
    'program.aslikyan.title': 'AI – bozor va ta\'lim o\'rtasida ko\'prik',
    'program.aslikyan.speaker': 'Narek Aslikyan',
    'program.aslikyan.details': '',
    'program.anvarov.title': 'LMS tizimidagi rivojlanish',
    'program.anvarov.speaker': 'S. Anvarov',
    'program.anvarov.details': '',
    'program.bobrovnikov.title': 'Sun\'iy intellekt mutaxassislarini tayyorlash',
    'program.bobrovnikov.speaker': 'Boris Bobrovnikov',
    'program.bobrovnikov.details': '',
    'program.dianova.title': '—',
    'program.dianova.speaker': 'Vera Dianova',
    'program.foucaud.title': 'AI davrida ta\'lim va ko\'nikmalar kelajagi',
    'program.foucaud.speaker': 'Nikolaz Foucaud',
    'program.foucaud.details': '',
    'program.nabieva.title': 'Huawei ta\'lim tashabbusi',
    'program.nabieva.speaker': 'A. Nabieva / Lobar',
    'program.nabieva.details': '',
    'program.zurutuza.title': 'AI ta\'lim infratuzilmasi',
    'program.zurutuza.speaker': 'Naora Zurutuza',
    'program.zurutuza.details': '',
    'program.panel.title': 'Taqdirlash marosimi',
    'program.panel.speaker': 'R. Karimjonov, A. Eshankulov, J. Askarov, A. Nabieva',
    'program.panel.details': '',
    'program.quiz.title': 'Quiz',
    'program.quiz.speaker': 'B. Turanmuratova',
    'program.quiz.details': '',
    'program.masterclass1.title': 'AI yordamida to\'g\'ri prompt yozish',
    'program.masterclass1.speaker': 'Oybek Artikov',
    'program.masterclass1.details': '',
    'program.masterclass2.title': 'Chat-bot yasash mashg\'uloti',
    'program.masterclass2.speaker': 'Xurshidbek Kurbanov',
    'program.masterclass2.details': '',
    'program.masterclass3.title': 'AI orqali kreativ kontent',
    'program.masterclass3.speaker': 'Saud Abdulwaheed',
    'program.masterclass3.details': '',
    'program.closing.title': 'Yakuniy qism',
    'program.closing.speaker': 'Yandex Uzbekistan',
    'program.closing.details': ''
  },
  en: {
    'brand.name': 'TECH FORUM',
    'org.name': 'Center for Digital Education Development',
    'footer.section.students': 'For Students',
    'footer.section.entrepreneurs': 'For Entrepreneurs',
    'footer.link.courses': 'Courses',
    'footer.link.centers': 'IT Centers',
    'footer.link.about': 'About Us',
    'footer.link.contact': 'Contact Us',
    'hero.title': 'AI in Digital Education: from vision to impact',
    'hero.tagline': 'Get to know the latest news, innovations, and technologies in digital education: Speeches from foreign and local experts, panel discussions, and contests!',
    'hero.cta.program': 'Forum Program',
    'hero.cta.projects': 'Digital education projects',
    'hero.qr.scan': 'Scan for event info',
    'hero.qr.tooltip': 'Copy link',
    'hero.qr.desc': 'Official portal: registration, live updates, venue map & networking tools. Replace QR placeholder easily.',
    'program.title': 'Forum Program',
    'program.subtitle': 'A curated agenda blending strategic vision, hands-on innovation and collaborative futures.',
    'projects.title': 'Featured Projects',
    'projects.subtitle': 'Initiatives accelerating digital ecosystems, sustainability & intelligent systems.',
    'projects.helper': 'Hover over a card for interaction.',
    'about.title': 'About Us',
    'about.p1': 'We unite technologists, researchers, investors and policy leaders to accelerate sustainable digital transformation.',
    'about.p2': 'Our mission: cultivate ecosystems where ideas evolve rapidly into real-world impact—empowering talent & ethical innovation.',
    'about.p3': 'Through forums, open labs & showcases we amplify breakthroughs across AI, quantum, cybersecurity & infrastructure.',
    'footer.about': 'An open platform to co-create the future.',
    'footer.contact': 'Contact',
    'footer.quick': 'Links',
    'footer.join': 'Join',
    'footer.register': 'Register',
    'contact.phone': '+998 71 203 03 43',
    'contact.email': 'education@digital.uz',
    'contact.address': '100164 Tashkent city, I.Muminov street, 4',
    'special.title': 'Special Session: AI For IT Education',
    'special.meta.date': 'Date',
    'special.meta.time': 'Start',
    'special.meta.location': 'Location',
    'special.meta.language': 'Language',
    'special.meta.participants': 'Participants',
    'special.meta.languagesValue': 'Uzbek / English',
    'special.meta.participantsValue': '800+ participants',
    'special.meta.dateValue': '24-September',
    'special.meta.timeValue': '09:00',
    'special.meta.locationValue': 'CAEx, Main Hall',
    'special.note': 'A focused block accelerating digital transformation in education.',
    'lang.toggle': 'RU',
    'nav.home': 'Home',
    'nav.program': 'Program',
    'nav.speakers': 'Speakers',
    'speakers.title': 'Speakers',
    'action.register': 'Register',
    'theme.dark': 'Dark',
    'theme.light': 'Light',
    'countdown.days': 'Days',
    'countdown.hours': 'Hours',
    'countdown.minutes': 'Minutes',
    'countdown.seconds': 'Seconds',
    'countdown.until': 'Until event start',
    'program.disclaimer': 'Schedule is indicative and may change.',
    'program.more': 'More',
    'program.less': 'Less',
    'program.reg.title': 'Registration',
    'program.reg.details': 'Participant reception and registration.',
    'program.opening.title': 'Opening Remarks',
    'program.opening.details': 'Forum theme, purpose and significance',
    'program.karimjonov.title': 'Opening Remarks',
    'program.karimjonov.speaker': 'R. Karimjonov',
    'program.karimjonov.details': 'Motivational speech',
    'program.break1.title': '—',
    'program.break2.title': '—',
    'program.unicef.title': 'UNICEF activities in Uzbekistan',
    'program.unicef.speaker': 'UNICEF',
    'program.unicef.details': '',
    'program.eshankulov.title': '5-year plans in digital education',
    'program.eshankulov.speaker': 'A. Eshankulov',
    'program.eshankulov.details': '',
    'program.aslikyan.title': 'AI – bridge between market and education',
    'program.aslikyan.speaker': 'Narek Aslikyan',
    'program.aslikyan.details': '',
    'program.anvarov.title': 'LMS system development',
    'program.anvarov.speaker': 'S. Anvarov',
    'program.anvarov.details': '',
    'program.bobrovnikov.title': 'Training AI specialists',
    'program.bobrovnikov.speaker': 'Boris Bobrovnikov',
    'program.bobrovnikov.details': '',
    'program.dianova.title': '—',
    'program.dianova.speaker': 'Vera Dianova',
    'program.foucaud.title': 'Future of education and skills in AI era',
    'program.foucaud.speaker': 'Nikolaz Foucaud',
    'program.foucaud.details': '',
    'program.nabieva.title': 'Huawei education initiative',
    'program.nabieva.speaker': 'A. Nabieva / Lobar',
    'program.nabieva.details': '',
    'program.zurutuza.title': 'AI education infrastructure',
    'program.zurutuza.speaker': 'Naora Zurutuza',
    'program.zurutuza.details': '',
    'program.panel.title': 'Awards ceremony',
    'program.panel.speaker': 'R. Karimjonov, A. Eshankulov, J. Askarov, A. Nabieva',
    'program.panel.details': '',
    'program.quiz.title': 'Quiz',
    'program.quiz.speaker': 'B. Turanmuratova',
    'program.quiz.details': '',
    'program.masterclass1.title': 'Writing effective prompts with AI',
    'program.masterclass1.speaker': 'Oybek Artikov',
    'program.masterclass1.details': '',
    'program.masterclass2.title': 'Chatbot building workshop',
    'program.masterclass2.speaker': 'Xurshidbek Kurbanov',
    'program.masterclass2.details': '',
    'program.masterclass3.title': 'Creative content with AI',
    'program.masterclass3.speaker': 'Saud Abdulwaheed',
    'program.masterclass3.details': '',
    'program.closing.title': 'Closing',
    'program.closing.speaker': 'Yandex Uzbekistan',
    'program.closing.details': ''
  },
  ru: {
    'brand.name': 'TECH FORUM',
    'org.name': 'Центр развития цифрового образования',
    'footer.section.students': 'Для студентов',
    'footer.section.entrepreneurs': 'Для предпринимателей',
    'footer.link.courses': 'Курсы',
    'footer.link.centers': 'IT центры',
    'footer.link.about': 'О нас',
    'footer.link.contact': 'Контакты',
    'hero.title': 'ИИ в цифровом образовании: от видения к воздействию',
    'hero.tagline': 'Узнайте о новейших трендах и технологиях в цифровом образовании: выступления экспертов, панели и конкурсы!',
    'hero.cta.program': 'Программа форума',
    'hero.cta.projects': 'Проекты цифрового образования',
    'hero.qr.scan': 'Сканируйте для информации о событии',
    'hero.qr.tooltip': 'Копировать ссылку',
    'hero.qr.desc': 'Официальный портал: регистрация, новости, карта площадки и networking.',
    'program.title': 'Программа форума',
    'program.subtitle': 'Кураторская повестка, объединяющая стратегическое видение и практические инновации.',
    'projects.title': 'Проекты',
    'projects.subtitle': 'Инициативы, ускоряющие цифровые экосистемы и интеллектуальные системы.',
    'projects.helper': 'Наведите на карточку — интерактивная анимация.',
    'about.title': 'О нас',
    'about.p1': 'Мы объединяем технологов, исследователей, инвесторов и лидеров политики.',
    'about.p2': 'Миссия: развивать экосистемы, где идеи быстро превращаются в реальный эффект.',
    'about.p3': 'Через форумы, открытые лаборатории и витрины усиливаем прорывы в ИИ и кибербезопасности.',
    'footer.about': 'Открытая платформа для совместного создания будущего.',
    'footer.contact': 'Контакты',
    'footer.quick': 'Ссылки',
    'footer.join': 'Присоединяйтесь',
    'footer.register': 'Регистрация',
    'contact.phone': '+998 71 203 03 43',
    'contact.email': 'education@digital.uz',
    'contact.address': '100164, г. Ташкент, ул. И. Муминова, 4',
    'special.title': 'Спецсессия: ИИ для IT-образования',
    'special.meta.date': 'Дата',
    'special.meta.time': 'Начало',
    'special.meta.location': 'Локация',
    'special.meta.language': 'Язык',
    'special.meta.participants': 'Участники',
    'special.meta.languagesValue': 'Узбекский / Английский',
    'special.meta.participantsValue': '800+ участников',
    'special.meta.dateValue': '24-сентября',
    'special.meta.timeValue': '09:00',
    'special.meta.locationValue': 'CAEx, Main Hall',
    'special.note': 'Фокус-блок о цифровой трансформации образования.',
    'lang.toggle': 'UZ',
    'nav.home': 'Главная',
    'nav.program': 'Программа',
    'nav.speakers': 'Спикеры',
    'speakers.title': 'Спикеры',
    'action.register': 'Регистрация',
    'theme.dark': 'Тёмная',
    'theme.light': 'Светлая',
    'countdown.days': 'Дней',
    'countdown.hours': 'Часов',
    'countdown.minutes': 'Минут',
    'countdown.seconds': 'Секунд',
    'countdown.until': 'До начала события',
    'program.disclaimer': 'Расписание предварительное и может измениться.',
    'program.more': 'Подробнее',
    'program.less': 'Свернуть',
    'program.reg.title': 'Регистрация',
    'program.reg.details': 'Встреча и регистрация участников.',
    'program.opening.title': 'Приветственное слово',
    'program.opening.details': 'Тема форума, цель и значимость',
    'program.karimjonov.title': 'Приветственное слово',
    'program.karimjonov.speaker': 'Р. Каримжонов',
    'program.karimjonov.details': 'Мотивационная речь',
    'program.break1.title': '—',
    'program.break2.title': '—',
    'program.unicef.title': 'Деятельность UNICEF в Узбекистане',
    'program.unicef.speaker': 'UNICEF',
    'program.unicef.details': '',
    'program.eshankulov.title': '5-летние планы в цифровом образовании',
    'program.eshankulov.speaker': 'А. Эшанкулов',
    'program.eshankulov.details': '',
    'program.aslikyan.title': 'ИИ – мост между рынком и образованием',
    'program.aslikyan.speaker': 'Нарек Асликян',
    'program.aslikyan.details': '',
    'program.anvarov.title': 'Развитие LMS системы',
    'program.anvarov.speaker': 'С. Анваров',
    'program.anvarov.details': '',
    'program.bobrovnikov.title': 'Подготовка специалистов по ИИ',
    'program.bobrovnikov.speaker': 'Борис Бобровников',
    'program.bobrovnikov.details': '',
    'program.dianova.title': '—',
    'program.dianova.speaker': 'Вера Дианова',
    'program.foucaud.title': 'Будущее образования и навыков в эпоху ИИ',
    'program.foucaud.speaker': 'Николаз Фуко',
    'program.foucaud.details': '',
    'program.nabieva.title': 'Образовательная инициатива Huawei',
    'program.nabieva.speaker': 'А. Набиева / Лобар',
    'program.nabieva.details': '',
    'program.zurutuza.title': 'Образовательная инфраструктура ИИ',
    'program.zurutuza.speaker': 'Наора Зурутуза',
    'program.zurutuza.details': '',
    'program.panel.title': 'Церемония награждения',
    'program.panel.speaker': 'Р. Каримжонов, А. Эшанкулов, Ж. Аскаров, А. Набиева',
    'program.panel.details': '',
    'program.quiz.title': 'Викторина',
    'program.quiz.speaker': 'Б. Туранмуратова',
    'program.quiz.details': '',
    'program.masterclass1.title': 'Правильные промпты с помощью ИИ',
    'program.masterclass1.speaker': 'Ойбек Артиков',
    'program.masterclass1.details': '',
    'program.masterclass2.title': 'Практикум по созданию чат-бота',
    'program.masterclass2.speaker': 'Хуршидбек Курбанов',
    'program.masterclass2.details': '',
    'program.masterclass3.title': 'Креативный контент с ИИ',
    'program.masterclass3.speaker': 'Сауд Абдулвахид',
    'program.masterclass3.details': '',
    'program.closing.title': 'Заключительная часть',
    'program.closing.speaker': 'Yandex Uzbekistan',
    'program.closing.details': ''
  }
};

const I18nContext = createContext<I18nContextValue | undefined>(undefined);

export const I18nProvider = ({ children }: { children: ReactNode }) => {
  const [lang, setLang] = useState<Lang>('uz');
  const t = useCallback((key: string) => dictionaries[lang][key] ?? key, [lang]);
  const switchLang = useCallback(() => setLang(l => (l === 'uz' ? 'en' : l === 'en' ? 'ru' : 'uz')), []);
  return <I18nContext.Provider value={{ lang, t, switchLang }}>{children}</I18nContext.Provider>;
};

export const useI18n = () => {
  const ctx = useContext(I18nContext);
  if (!ctx) throw new Error('useI18n must be used within I18nProvider');
  return ctx;
};
